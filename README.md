<div align="center">

# ğŸ¥ Vitalis DB
### Sistema Integral de AdministraciÃ³n de Centros de Salud

![Vitalis Logo](Vitalis.png)

[![Oracle](https://img.shields.io/badge/Oracle-19c-F80000?style=for-the-badge&logo=oracle&logoColor=white)](https://www.oracle.com/)
[![Docker](https://img.shields.io/badge/Docker-Enabled-2496ED?style=for-the-badge&logo=docker&logoColor=white)](https://www.docker.com/)
[![License](https://img.shields.io/badge/License-Custom-yellow?style=for-the-badge)](LICENSE)
[![Status](https://img.shields.io/badge/Status-En%20Desarrollo-orange?style=for-the-badge)]()

**Universidad Nacional Sede RegiÃ³n Brunca** | **II Ciclo 2025**

[ğŸš€ Inicio RÃ¡pido](#-instalaciÃ³n-y-configuraciÃ³n) â€¢ [ğŸ“– DocumentaciÃ³n](#-documentaciÃ³n-adicional) â€¢ [ğŸ‘¥ Equipo](#-equipo-de-desarrollo) â€¢ [ğŸ“ Soporte](#-soporte-y-contribuciones)

</div>

---

## ğŸŒŸ Acerca del Proyecto

> **Vitalis DB** es una soluciÃ³n empresarial de gestiÃ³n hospitalaria construida sobre Oracle 19c, diseÃ±ada para optimizar la administraciÃ³n de centros de salud mediante automatizaciÃ³n inteligente, alta disponibilidad y seguridad robusta.

### ğŸ’¡ Â¿Por quÃ© Vitalis DB?

| CaracterÃ­stica | Beneficio |
|----------------|-----------|
| **ğŸ”„ Alta Disponibilidad** | Sistema standby con sincronizaciÃ³n automÃ¡tica cada 5 minutos |
| **ğŸ¤– AutomatizaciÃ³n Completa** | Jobs programados para mantenimiento, notificaciones y auditorÃ­a |
| **ğŸ” Seguridad Multinivel** | Roles, perfiles, encriptaciÃ³n y auditorÃ­a completa |
| **ğŸ“§ Notificaciones Inteligentes** | Sistema de emails directo desde Oracle con encriptaciÃ³n |
| **ğŸ“Š GestiÃ³n Financiera** | Control completo de planillas, pagos y reportes bancarios |
| **ğŸ³ Containerizado** | Despliegue rÃ¡pido con Docker Compose |

## ğŸ¯ Objetivos del Proyecto

<table>
<tr>
<td width="33%" align="center">
<h3>ğŸ¨ DiseÃ±o</h3>
Aplicar modelos relacionales avanzados para sistemas de salud con normalizaciÃ³n Ã³ptima
</td>
<td width="33%" align="center">
<h3>âš™ï¸ AdministraciÃ³n</h3>
Implementar soluciones de alta disponibilidad con Oracle Data Guard y automatizaciÃ³n
</td>
<td width="33%" align="center">
<h3>ğŸ”’ Seguridad</h3>
Establecer capas de seguridad con roles, encriptaciÃ³n y auditorÃ­a completa
</td>
</tr>
</table>

## ğŸš€ Funcionalidades Principales

<details open>
<summary><h3>ğŸ‘¥ GestiÃ³n de Personal MÃ©dico y Administrativo</h3></summary>

```
âœ¨ CaracterÃ­sticas Destacadas
â”œâ”€â”€ ğŸ“ Auto-registro de personal mÃ©dico y administrativo
â”œâ”€â”€ âœ… Sistema de aprobaciÃ³n por administradores
â”œâ”€â”€ ğŸ”‘ GeneraciÃ³n automÃ¡tica de usuarios y credenciales
â”œâ”€â”€ ğŸ‘¤ GestiÃ³n completa de perfiles y permisos por rol
â”œâ”€â”€ ğŸ’³ Registro de informaciÃ³n bancaria para pagos electrÃ³nicos
â”œâ”€â”€ ğŸ“„ Control de documentaciÃ³n y requisitos por puesto
â””â”€â”€ ğŸ”’ DesactivaciÃ³n automÃ¡tica por inactividad (90 dÃ­as)
```
</details>

<details open>
<summary><h3>ğŸ¢ AdministraciÃ³n de Centros de Salud</h3></summary>

- ğŸ¥ **Registro y gestiÃ³n de centros** mÃ©dicos con jerarquÃ­a regional
- â° **Control de puestos** mÃ©dicos y asignaciÃ³n de turnos
- ğŸ’‰ **CatÃ¡logo de procedimientos** mÃ©dicos con tarifas
- ğŸ“… **Escalas de atenciÃ³n** base y mensuales automatizadas
- ğŸ’° **Sistema de cobros** y control de pagos por servicios
- ğŸ“Š **Reportes operativos** por centro y regiÃ³n
</details>

<details open>
<summary><h3>ğŸ’° Sistema de Planillas y Pagos</h3></summary>

| MÃ³dulo | Funcionalidad |
|--------|---------------|
| **Tipos de Planilla** | CreaciÃ³n y configuraciÃ³n de planillas personalizadas |
| **GeneraciÃ³n AutomÃ¡tica** | Procesamiento mensual de planillas por procedimiento |
| **Comprobantes Digitales** | EnvÃ­o automÃ¡tico de comprobantes por email |
| **Control de Deducciones** | GestiÃ³n de movimientos, descuentos y bonificaciones |
| **Reportes Bancarios** | Archivos de depÃ³sito masivo para bancos |
| **AuditorÃ­a Completa** | Trazabilidad de todos los pagos y modificaciones |
</details>

<details open>
<summary><h3>ğŸ“Š Control Financiero Centralizado</h3></summary>

- ğŸ“ˆ **ResÃºmenes mensuales** de ingresos y gastos consolidados
- ğŸ¥ **Reportes por centro** de salud con desglose detallado
- ğŸ’µ **Control de transacciones** con auditorÃ­a temporal
- ğŸ“‰ **AnÃ¡lisis de tendencias** y proyecciones financieras
- ğŸ§¾ **IntegraciÃ³n bancaria** para conciliaciÃ³n automÃ¡tica
</details>

---

## ğŸ” Arquitectura de Seguridad Multinivel

<div align="center">

```mermaid
graph TB
    A[ğŸ‘¤ Usuario] --> B{AutenticaciÃ³n}
    B -->|VÃ¡lido| C[Roles Oracle]
    B -->|InvÃ¡lido| Z[âŒ Acceso Denegado]
    C --> D[ROL_ADMIN]
    C --> E[ROL_MEDICO]
    C --> F[ROL_ADMINISTRATIVO]
    D --> G[Perfiles de Usuario]
    E --> G
    F --> G
    G --> H[Control por Pantalla]
    H --> I[ğŸ“Š Acceso a Datos]
    I --> J[AuditorÃ­a/BitÃ¡cora]
```

</div>

### ğŸ›¡ï¸ Capas de Seguridad Implementadas

| Capa | Componente | DescripciÃ³n |
|------|-----------|-------------|
| **1ï¸âƒ£** | **AutenticaciÃ³n Oracle** | Usuarios nativos con contraseÃ±as encriptadas |
| **2ï¸âƒ£** | **Roles Funcionales** | `ROL_ADMIN`, `ROL_MEDICO`, `ROL_ADMINISTRATIVO` |
| **3ï¸âƒ£** | **Perfiles de Usuario** | Control granular por funcionalidad y pantalla |
| **4ï¸âƒ£** | **Procedimientos Seguros** | AsignaciÃ³n automÃ¡tica de permisos al crear usuarios |
| **5ï¸âƒ£** | **AuditorÃ­a Completa** | BitÃ¡cora de todas las operaciones crÃ­ticas |
| **6ï¸âƒ£** | **EncriptaciÃ³n** | Claves de email y datos sensibles encriptados |

### ğŸ“§ Sistema de Notificaciones Seguro

```sql
-- IntegraciÃ³n con Brevo API
PKG_BREVO_MAIL
â”œâ”€â”€ ConfiguraciÃ³n parametrizada (host, puerto, credenciales)
â”œâ”€â”€ EncriptaciÃ³n de claves con DBMS_CRYPTO
â”œâ”€â”€ EnvÃ­o directo desde Oracle sin middleware
â”œâ”€â”€ Templates HTML personalizables
â””â”€â”€ Log de envÃ­os para auditorÃ­a
```

**âœ¨ Funcionalidades de NotificaciÃ³n:**
- ğŸ“¬ Comprobantes de pago automÃ¡ticos
- âš ï¸ Alertas de mantenimiento y tablespaces
- ğŸ”§ Reportes de objetos invÃ¡lidos
- ğŸ‘¤ Notificaciones de desactivaciÃ³n de usuarios
- ğŸ“Š Reportes de jobs ejecutados

## ğŸ“ Arquitectura del Proyecto

```
ğŸ¥ vitalis_db/
â”‚
â”œâ”€â”€ ğŸ“„ LICENSE                          # Licencia del proyecto
â”œâ”€â”€ ğŸ“„ README.md                        # DocumentaciÃ³n principal
â”œâ”€â”€ ğŸ“„ vitalis_script.SQL               # Script consolidado de la BD
â”œâ”€â”€ ğŸ–¼ï¸ Vitalis.png                      # Logo oficial del proyecto
â”œâ”€â”€ ğŸ“„ Vitalis.txp                      # Modelo ER de base de datos
â”‚
â”œâ”€â”€ ğŸ“ PadronNacional/                  # Datos demogrÃ¡ficos nacionales
â”‚   â””â”€â”€ ğŸ—‚ï¸ InformaciÃ³n del padrÃ³n para validaciÃ³n de identidades
â”‚
â”œâ”€â”€ ğŸ“ Primary/                         # ConfiguraciÃ³n Base de Datos Principal
â”‚   â”œâ”€â”€ ğŸ“ Documentation/
â”‚   â”‚   â”œâ”€â”€ ğŸ“‹ BITACORA.md              # Sistema de auditorÃ­a
â”‚   â”‚   â””â”€â”€ ğŸ“– Jobs_Manual.md           # GuÃ­a de configuraciÃ³n de Jobs
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“ Scripts/
â”‚       â”œâ”€â”€ ğŸ—„ï¸ tablespace.sql          # DefiniciÃ³n de tablespaces
â”‚       â”œâ”€â”€ ğŸ“Š schema.sql               # Esquema principal de la BD
â”‚       â”œâ”€â”€ ğŸ” seguridad_roles.sql      # Roles y permisos
â”‚       â”œâ”€â”€ âš¡ triggers.sql             # Triggers principales
â”‚       â”œâ”€â”€ ğŸ“‚ DATA_DIR.sql             # ConfiguraciÃ³n de directorios
â”‚       â”‚
â”‚       â”œâ”€â”€ ğŸ“ start/                   # Scripts de inicializaciÃ³n
â”‚       â”‚   â”œâ”€â”€ personas.sql            # Datos de personas
â”‚       â”‚   â”œâ”€â”€ centrosalud.sql         # Centros de salud
â”‚       â”‚   â”œâ”€â”€ escalasbase.sql         # Escalas de atenciÃ³n
â”‚       â”‚   â”œâ”€â”€ procedimientos_medicos.sql
â”‚       â”‚   â”œâ”€â”€ tipos_planillas.sql
â”‚       â”‚   â”œâ”€â”€ pre-binnacle.sql        # Pre-configuraciÃ³n auditorÃ­a
â”‚       â”‚   â”œâ”€â”€ pre-job.sql             # Pre-configuraciÃ³n jobs
â”‚       â”‚   â””â”€â”€ pre-spreadsheet.sql     # Pre-configuraciÃ³n planillas
â”‚       â”‚
â”‚       â”œâ”€â”€ ğŸ“ binnacle/                # Sistema de auditorÃ­a
â”‚       â”‚   â””â”€â”€ triggers.sql            # Triggers de bitÃ¡cora
â”‚       â”‚
â”‚       â”œâ”€â”€ ğŸ“ email/                   # Sistema de notificaciones
â”‚       â”‚   â”œâ”€â”€ email_parameters.sql    # ConfiguraciÃ³n SMTP
â”‚       â”‚   â””â”€â”€ start_email.sql         # InicializaciÃ³n de email
â”‚       â”‚
â”‚       â”œâ”€â”€ ğŸ“ packages/                # Paquetes PL/SQL
â”‚       â”‚   â””â”€â”€ PKG_BREVO_MAIL.sql      # API de envÃ­o de emails
â”‚       â”‚
â”‚       â”œâ”€â”€ ğŸ“ procedure/               # Procedimientos almacenados
â”‚       â”‚   â”œâ”€â”€ GENERATE_PLANILLAS_FULL.sql
â”‚       â”‚   â”œâ”€â”€ DESACTIVATE_USERS.sql
â”‚       â”‚   â”œâ”€â”€ VERIFY_TABLESPACES.sql
â”‚       â”‚   â”œâ”€â”€ VERIFY_INDEXES.sql
â”‚       â”‚   â”œâ”€â”€ VERIFY_INVALID_OBJECTS.sql
â”‚       â”‚   â”œâ”€â”€ SCALEMONTHLY.sql
â”‚       â”‚   â”œâ”€â”€ JOBS_LOG.sql
â”‚       â”‚   â””â”€â”€ send_email_planilla.sql
â”‚       â”‚
â”‚       â”œâ”€â”€ ğŸ“ jobs/                    # DefiniciÃ³n de Jobs Oracle
â”‚       â”‚   â”œâ”€â”€ DESACTIVATE_USERS.sql   # Job mensual inactividad
â”‚       â”‚   â”œâ”€â”€ VERIFY_TABLESPACES.sql  # Job diario espacios
â”‚       â”‚   â”œâ”€â”€ VERIFY_INDEXES.sql      # Job diario Ã­ndices
â”‚       â”‚   â””â”€â”€ VERIFY_INVALID_OBJECTS.sql
â”‚       â”‚
â”‚       â””â”€â”€ ğŸ“ test/                    # Scripts de prueba
â”‚           â”œâ”€â”€ test-binnacle.sql
â”‚           â”œâ”€â”€ test-jobs.sql
â”‚           â”œâ”€â”€ test-scale.sql
â”‚           â”œâ”€â”€ test-spreadsheet.sql
â”‚           â””â”€â”€ test-roles.sql
â”‚
â””â”€â”€ ğŸ“ standby/                         # Alta Disponibilidad
    â”œâ”€â”€ ğŸ³ docker-compose.yml           # OrquestaciÃ³n de contenedores
    â”œâ”€â”€ ğŸ³ Dockerfile.vitalis-primary
    â”œâ”€â”€ ğŸ³ Dockerfile.vitalis-standby
    â”‚
    â”œâ”€â”€ ğŸ“ Documentation/
    â”‚   â”œâ”€â”€ ğŸ”§ DBEAVER-CONFIG.md        # ConfiguraciÃ³n cliente DBeaver
    â”‚   â”œâ”€â”€ ğŸ‹ oracle-docker-guide.md   # GuÃ­a Oracle en Docker
    â”‚   â”œâ”€â”€ ğŸ”„ SWITCHOVER-GUIDE.md      # Proceso completo de switchover
    â”‚   â””â”€â”€ âš¡ SWITCHOVER-QUICK.md      # GuÃ­a rÃ¡pida de switchover
    â”‚
    â””â”€â”€ ğŸ“ scripts/
        â”œâ”€â”€ ğŸ“ main/                    # Scripts para servidor principal
        â”‚   â”œâ”€â”€ backup_vitalis.sh       # Backup manual
        â”‚   â”œâ”€â”€ daily_backup.sh         # Backup automÃ¡tico diario
        â”‚   â”œâ”€â”€ initialize_vitalis.sh   # InicializaciÃ³n primaria
        â”‚   â”œâ”€â”€ purge_applied_logs.sh   # Limpieza de logs aplicados
        â”‚   â””â”€â”€ purge_complete_logs_in_standby.sh
        â”‚
        â”œâ”€â”€ ğŸ“ standby/                 # Scripts para servidor standby
        â”‚   â”œâ”€â”€ initialize_vitalis.sh   # InicializaciÃ³n standby
        â”‚   â”œâ”€â”€ switchover_to_primary.sh # ConversiÃ³n a primaria
        â”‚   â”œâ”€â”€ fix_listener.sh         # ReparaciÃ³n de listener
        â”‚   â”œâ”€â”€ delete_obsolete_vitalis.sh
        â”‚   â”œâ”€â”€ purge_applied_logs.sh
        â”‚   â””â”€â”€ purge_complete_logs_in_standby.sh
        â”‚
        â””â”€â”€ ğŸ“ test/                    # Scripts de validaciÃ³n
            â”œâ”€â”€ check_sync_status.sql   # Estado de sincronizaciÃ³n
            â”œâ”€â”€ test-primary.sql        # Test servidor principal
            â””â”€â”€ test-standby.sql        # Test servidor standby
```

---

## ğŸ› ï¸ Stack TecnolÃ³gico

<div align="center">

| CategorÃ­a | TecnologÃ­a | VersiÃ³n | PropÃ³sito |
|-----------|------------|---------|-----------|
| **ğŸ’¾ Base de Datos** | Oracle Database | 19c Enterprise | Motor principal de datos |
| **ğŸ”„ ReplicaciÃ³n** | Oracle Data Guard | 19c | Alta disponibilidad y DR |
| **ğŸ³ ContainerizaciÃ³n** | Docker | Latest | Aislamiento y portabilidad |
| **ğŸ¼ OrquestaciÃ³n** | Docker Compose | Latest | GestiÃ³n multi-contenedor |
| **ğŸ“§ Email Service** | Brevo API | v3 | EnvÃ­o de notificaciones |
| **ğŸ’» Scripting** | Bash/Shell | - | AutomatizaciÃ³n y mantenimiento |
| **ğŸ—‚ï¸ Modelado** | Oracle SQL Developer | - | DiseÃ±o ER y modelado |
| **ğŸ” Cliente DB** | DBeaver | Community | AdministraciÃ³n y testing |

</div>

### ğŸ—ï¸ Arquitectura de Despliegue

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     PRODUCCIÃ“N                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ³ Container: vitalis-primary                              â”‚
â”‚  â”œâ”€â”€ Oracle 19c (Modo READ WRITE)                          â”‚
â”‚  â”œâ”€â”€ Data Guard (Primaria)                                 â”‚
â”‚  â”œâ”€â”€ Archive Logs (GeneraciÃ³n)                             â”‚
â”‚  â”œâ”€â”€ Jobs AutomÃ¡ticos (Activos)                            â”‚
â”‚  â””â”€â”€ Backups Diarios                                       â”‚
â”‚                                                             â”‚
â”‚  ğŸ“¡ SincronizaciÃ³n AutomÃ¡tica                              â”‚
â”‚  â”œâ”€â”€ Frecuencia: 5 min o 50 MB                            â”‚
â”‚  â”œâ”€â”€ Protocolo: Archive Log Shipping                       â”‚
â”‚  â””â”€â”€ ValidaciÃ³n: Cada 10 minutos                          â”‚
â”‚                                                             â”‚
â”‚  ğŸ³ Container: vitalis-standby                             â”‚
â”‚  â”œâ”€â”€ Oracle 19c (Modo MOUNT)                              â”‚
â”‚  â”œâ”€â”€ Data Guard (Standby FÃ­sica)                          â”‚
â”‚  â”œâ”€â”€ Archive Logs (AplicaciÃ³n)                            â”‚
â”‚  â”œâ”€â”€ RecuperaciÃ³n AutomÃ¡tica                              â”‚
â”‚  â””â”€â”€ Backup Reception                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ InstalaciÃ³n y ConfiguraciÃ³n

### ğŸ“‹ Prerrequisitos

<table>
<tr>
<td width="50%">

**ğŸ–¥ï¸ Software Requerido**
- Docker Desktop 20.10+
- Docker Compose 2.0+
- Git 2.30+
- 8 GB RAM mÃ­nimo
- 50 GB espacio en disco

</td>
<td width="50%">

**ğŸŒ ConfiguraciÃ³n de Red**
- Puerto 1521 (Oracle Primary)
- Puerto 1522 (Oracle Standby)
- Puerto 5500 (Enterprise Manager)
- Conectividad a Internet (Brevo API)

</td>
</tr>
</table>

### âš¡ InstalaciÃ³n RÃ¡pida

#### 1ï¸âƒ£ Clonar el Repositorio

```bash
git clone https://github.com/kjarj54/vitalis_db.git
cd vitalis_db
```

#### 2ï¸âƒ£ Configurar Base de Datos Principal

```bash
# Levantar contenedores con Docker Compose
cd standby
docker-compose up -d

# Verificar que los contenedores estÃ¡n corriendo
docker ps

# Conectar al contenedor principal
docker exec -it vitalis-primary /bin/bash
```

**Ejecutar scripts en orden dentro del contenedor:**

```sql
-- 1. Conectar como SYS
sqlplus sys/VITALIS as sysdba

-- 2. Crear tablespaces
@Primary/Scripts/tablespace.sql

-- 3. Crear directorios de datos
@Primary/Scripts/DATA_DIR.sql

-- 4. Crear esquema principal
@Primary/Scripts/schema.sql

-- 5. Configurar seguridad
@Primary/Scripts/seguridad_roles.sql

-- 6. Cargar datos iniciales
@Primary/Scripts/start/pre-paises.sql
@Primary/Scripts/start/personas.sql
@Primary/Scripts/start/centrosalud.sql
@Primary/Scripts/start/escalasbase.sql
@Primary/Scripts/start/procedimientos_medicos.sql
@Primary/Scripts/start/tipos_planillas.sql
@Primary/Scripts/start/tipos_procedimientos.sql
@Primary/Scripts/start/movimientos.sql
@Primary/Scripts/start/puestoTurno.sql

-- 7. Configurar sistema de auditorÃ­a
@Primary/Scripts/start/pre-binnacle.sql
@Primary/Scripts/binnacle/triggers.sql

-- 8. Configurar sistema de emails
@Primary/Scripts/email/start_email.sql
@Primary/Scripts/email/email_parameters.sql
@Primary/Scripts/packages/PKG_BREVO_MAIL.sql

-- 9. Configurar Jobs automÃ¡ticos
@Primary/Scripts/start/pre-job.sql
@Primary/Scripts/procedure/JOBS_LOG.sql
@Primary/Scripts/procedure/DESACTIVATE_USERS.sql
@Primary/Scripts/procedure/VERIFY_TABLESPACES.sql
@Primary/Scripts/procedure/VERIFY_INDEXES.sql
@Primary/Scripts/procedure/VERIFY_INVALID_OBJECTS.sql

-- 10. Crear Jobs
@Primary/Scripts/jobs/DESACTIVATE_USERS.sql
@Primary/Scripts/jobs/VERIFY_TABLESPACES.sql
@Primary/Scripts/jobs/VERIFY_INDEXES.sql
@Primary/Scripts/jobs/VERIFY_INVALID_OBJECTS.sql

-- 11. Configurar planillas
@Primary/Scripts/start/pre-spreadsheet.sql
@Primary/Scripts/procedure/GENERATE_PLANILLAS_FULL.sql
@Primary/Scripts/procedure/SCALEMONTHLY.sql
@Primary/Scripts/procedure/send_email_planilla.sql

-- 12. Crear triggers principales
@Primary/Scripts/triggers.sql
```

#### 3ï¸âƒ£ Inicializar Servidor Standby

```bash
# Desde el host, ejecutar script de inicializaciÃ³n
cd standby/scripts/standby
./initialize_vitalis.sh
```

#### 4ï¸âƒ£ Verificar SincronizaciÃ³n

```sql
-- En el contenedor primary
sqlplus sys/VITALIS as sysdba
@standby/scripts/test/test-primary.sql

-- En el contenedor standby
sqlplus sys/VITALISSB as sysdba
@standby/scripts/test/test-standby.sql
@standby/scripts/test/check_sync_status.sql
```

### ğŸ§ª Testing y ValidaciÃ³n

```bash
# Ejecutar suite completa de pruebas
cd Primary/Scripts/test

# Probar sistema de auditorÃ­a
sqlplus ADMIN_VITALIS/VITALIS@//localhost:1521/VITALIS
@test-binnacle.sql

# Probar Jobs
@test-jobs.sql

# Probar sistema de roles
@test-roles.sql

# Probar generaciÃ³n de planillas
@test-spreadsheet.sql
@test-scale.sql

# Probar envÃ­o de emails
@test-port-email.sql
```

---

## ğŸ“ˆ Sistema de Alta Disponibilidad (HA)

### ğŸ”„ Arquitectura Oracle Data Guard

<div align="center">

```mermaid
graph LR
    A[ğŸ¥ AplicaciÃ³n] --> B[vitalis-primary<br/>READ-WRITE]
    B -->|Archive Logs| C[ğŸ“¦ Archive Area]
    C -->|Transfer<br/>5min/50MB| D[ğŸ“¦ Standby Archive]
    D -->|Apply| E[vitalis-standby<br/>MOUNT]
    B -.->|Backup Diario| F[ğŸ’¾ Backup Storage]
    F -.->|Transfer| E
    E -->|Switchover| G[ğŸ”„ Nueva Primary]
    
    style B fill:#4CAF50,stroke:#333,stroke-width:2px,color:#fff
    style E fill:#2196F3,stroke:#333,stroke-width:2px,color:#fff
    style G fill:#FF9800,stroke:#333,stroke-width:2px,color:#fff
```

</div>

### âš™ï¸ CaracterÃ­sticas del Sistema Standby

| CaracterÃ­stica | ConfiguraciÃ³n | Beneficio |
|----------------|---------------|-----------|
| **ğŸ”„ SincronizaciÃ³n** | Cada 5 min o 50 MB | PÃ©rdida de datos < 5 minutos |
| **ğŸ“¦ Transfer Service** | AutomÃ¡tico cada 10 min | ReplicaciÃ³n continua |
| **ğŸ§¹ Limpieza AutomÃ¡tica** | Archivos > 3 dÃ­as | OptimizaciÃ³n de espacio |
| **ğŸ’¾ Backup Diario** | 2:00 AM automÃ¡tico | RecuperaciÃ³n point-in-time |
| **ğŸ”€ Switchover** | Manual guiado | Failover planificado |
| **âš¡ Recovery Time** | < 15 minutos | MÃ­nima interrupciÃ³n |
| **ğŸ“Š Monitoring** | Scripts automÃ¡ticos | DetecciÃ³n temprana |

### ğŸ¤– Jobs AutomÃ¡ticos de Mantenimiento

<details>
<summary><b>ğŸ“… Job 1: DesactivaciÃ³n de Usuarios Inactivos</b></summary>

```sql
Nombre: JOB_DESACTIVATE_USERS
Frecuencia: Primer dÃ­a de cada mes a las 00:00
Procedimiento: DESACTIVATE_USERS
```

**FunciÃ³n:** Desactiva automÃ¡ticamente usuarios sin actividad por mÃ¡s de 90 dÃ­as y envÃ­a notificaciÃ³n por email.

**Beneficios:**
- âœ… Mejora la seguridad eliminando cuentas inactivas
- âœ… Notifica a administradores sobre usuarios desactivados
- âœ… Mantiene auditorÃ­a de desactivaciones

</details>

<details>
<summary><b>ğŸ’¾ Job 2: VerificaciÃ³n de Tablespaces</b></summary>

```sql
Nombre: JOB_VERIFY_TABLESPACES
Frecuencia: Diario a las 06:00
Procedimiento: VERIFY_TABLESPACES
```

**FunciÃ³n:** Verifica el uso de espacio en todos los tablespaces y alerta cuando supera el 85%.

**Alertas generadas:**
- ğŸŸ¡ Warning: 85-90% de uso
- ğŸ”´ Critical: >90% de uso
- ğŸ“§ Email automÃ¡tico a administradores

</details>

<details>
<summary><b>ğŸ”§ Job 3: VerificaciÃ³n de Objetos InvÃ¡lidos</b></summary>

```sql
Nombre: JOB_VERIFY_INVALID_OBJECTS
Frecuencia: Diario a las 07:00
Procedimiento: VERIFY_INVALID_OBJECTS
```

**FunciÃ³n:** Detecta y reporta objetos de base de datos en estado invÃ¡lido.

**Cobertura:**
- Procedimientos almacenados
- Funciones
- Paquetes PL/SQL
- Triggers
- Vistas

</details>

<details>
<summary><b>ğŸ” Job 4: VerificaciÃ³n de Ãndices</b></summary>

```sql
Nombre: JOB_VERIFY_INDEXES
Frecuencia: Diario a las 08:00
Procedimiento: VERIFY_INDEXES
```

**FunciÃ³n:** Analiza el estado de todos los Ã­ndices y detecta corrupciÃ³n o fragmentaciÃ³n.

**Acciones:**
- Valida integridad de Ã­ndices
- Detecta Ã­ndices daÃ±ados o corruptos
- Genera reporte de recomendaciones
- Notifica necesidad de rebuild

</details>

### ğŸ“Š Dashboard de Monitoreo

```sql
-- Query rÃ¡pido de estado del sistema
SELECT 
    'ğŸ”„ ReplicaciÃ³n' as componente,
    CASE WHEN gap_count = 0 THEN 'âœ… OK' ELSE 'âš ï¸ GAP' END as estado
FROM (
    SELECT COUNT(*) as gap_count FROM v$archive_gap
)
UNION ALL
SELECT 
    'ğŸ’¾ Tablespaces' as componente,
    CASE WHEN MAX(pct_used) < 85 THEN 'âœ… OK' ELSE 'âš ï¸ ALERTA' END as estado
FROM (
    SELECT 
        ROUND((1 - (free.bytes / total.bytes)) * 100, 2) as pct_used
    FROM 
        (SELECT tablespace_name, SUM(bytes) bytes 
         FROM dba_free_space GROUP BY tablespace_name) free,
        (SELECT tablespace_name, SUM(bytes) bytes 
         FROM dba_data_files GROUP BY tablespace_name) total
    WHERE free.tablespace_name = total.tablespace_name
)
UNION ALL
SELECT 
    'ğŸ”§ Objetos' as componente,
    CASE WHEN invalid_count = 0 THEN 'âœ… OK' ELSE 'âš ï¸ REVISAR' END as estado
FROM (
    SELECT COUNT(*) as invalid_count 
    FROM dba_objects 
    WHERE status = 'INVALID'
);
```

---

## ğŸ‘¨â€ğŸ’» Equipo de Desarrollo

<div align="center">

| Avatar | Nombre | GitHub | Rol Principal | EspecializaciÃ³n |
|--------|--------|--------|---------------|-----------------|
| ğŸ§‘â€ğŸ’» | **Kevin Arauz** | [@kjarj54](https://github.com/kjarj54) | Lead Developer | Arquitectura & IntegraciÃ³n |
| ğŸ‘¨â€ğŸ’¼ | **Kevin Fallas** | [@kevtico20](https://github.com/kevtico20) | Database Administrator | Oracle DBA & ReplicaciÃ³n |
| ğŸ§‘â€ğŸ”§ | **James Rivera** | [@JamesRiveran](https://github.com/JamesRiveran) | Backend Developer | PL/SQL & AutomatizaciÃ³n |

### ğŸ¤ Contribuciones

<table>
<tr>
<td align="center">
<b>Kevin Arauz</b><br/>
ğŸ“ DiseÃ±o de arquitectura<br/>
ğŸ” Sistema de seguridad<br/>
ğŸ“§ IntegraciÃ³n Brevo API<br/>
ğŸ³ DockerizaciÃ³n
</td>
<td align="center">
<b>Kevin Fallas</b><br/>
ğŸ”„ Data Guard setup<br/>
ğŸ’¾ Estrategia de backup<br/>
ğŸ“Š Tablespace management<br/>
ğŸ”§ Performance tuning
</td>
<td align="center">
<b>James Rivera</b><br/>
âš¡ Triggers y procedimientos<br/>
ğŸ¤– Jobs automÃ¡ticos<br/>
ğŸ“‹ Sistema de planillas<br/>
ğŸ§ª Testing y validaciÃ³n
</td>
</tr>
</table>

</div>

---

## ğŸ« InformaciÃ³n AcadÃ©mica

<div align="center">

### ğŸ“ Universidad Nacional de Costa Rica
**Sede RegiÃ³n Brunca**

<table>
<tr>
<td align="center" width="50%">
<h4>ğŸ“š InformaciÃ³n del Curso</h4>
<b>Materia:</b> AdministraciÃ³n de Bases de Datos<br/>
<b>CÃ³digo:</b> EIF-420<br/>
<b>PerÃ­odo:</b> II Ciclo 2025<br/>
<b>Modalidad:</b> Presencial
</td>
<td align="center" width="50%">
<h4>ğŸ‘¨â€ğŸ« Cuerpo Docente</h4>
<b>Profesor:</b> MÃ¡ster Carlos Carranza Blanco<br/>
<b>Facultad:</b> Ciencias Exactas y Naturales<br/>
<b>Escuela:</b> InformÃ¡tica<br/>
<b>Sede:</b> RegiÃ³n Brunca, PÃ©rez ZeledÃ³n
</td>
</tr>
</table>

</div>  

---

## ğŸ“„ Licencia y Derechos de Autor

<div align="center">

### Â© 2025 Equipo Vitalis DB

**Autores Originales:** Kevin Arauz â€¢ Kevin Fallas â€¢ James Rivera

</div>

Este proyecto fue desarrollado con fines acadÃ©micos para el curso de **AdministraciÃ³n de Bases de Datos** en la Universidad Nacional Sede RegiÃ³n Brunca durante el II Ciclo 2025.

### ğŸ“œ TÃ©rminos de Uso

<table>
<tr>
<td width="50%" valign="top">

**âœ… Permitido:**
- ğŸ‘ï¸ VisualizaciÃ³n del cÃ³digo fuente
- ğŸ“– Estudio con fines educativos
- ğŸ”¬ AnÃ¡lisis de tÃ©cnicas implementadas
- ğŸ“ Referencia en trabajos acadÃ©micos (con cita)

</td>
<td width="50%" valign="top">

**âŒ Prohibido:**
- ğŸ’¼ Uso comercial sin autorizaciÃ³n
- ğŸ“‹ Copia para entregables acadÃ©micos
- ğŸ”„ RedistribuciÃ³n sin permiso
- ğŸ·ï¸ RemociÃ³n de crÃ©ditos originales

</td>
</tr>
</table>

**ğŸ“§ Para permisos especiales o consultas:** Contactar a travÃ©s de los perfiles de GitHub de los desarrolladores.

Ver archivo [LICENSE](LICENSE) para tÃ©rminos completos.

---

## ğŸ”„ Roadmap y Estado del Proyecto

<div align="center">



## ğŸ“ Soporte y Contribuciones

<div align="center">

### ğŸ¤ Â¿CÃ³mo Contribuir?

</div>

Apreciamos tu interÃ©s en mejorar **Vitalis DB**. AquÃ­ te explicamos cÃ³mo puedes participar:

### ğŸ› Reportar Problemas

1. **Busca** si el problema ya fue reportado en [Issues](../../issues)
2. **Crea un nuevo Issue** con la siguiente informaciÃ³n:
   - ğŸ“ DescripciÃ³n clara del problema
   - ğŸ”„ Pasos para reproducir
   - ğŸ’» Entorno (OS, versiÃ³n de Oracle, Docker)
   - ğŸ“¸ Capturas de pantalla si aplica

### ğŸ’¡ Sugerir Mejoras

1. Abre un [Issue](../../issues/new) con el tag `enhancement`
2. Describe detalladamente la funcionalidad propuesta
3. Explica el beneficio para el proyecto

### ğŸ”§ Contribuir con CÃ³digo

```bash
# 1. Fork el repositorio
# 2. Crea una rama para tu feature
git checkout -b feature/nueva-funcionalidad

# 3. Realiza tus cambios y commits
git commit -m "feat: descripciÃ³n de la nueva funcionalidad"

# 4. Push a tu fork
git push origin feature/nueva-funcionalidad

# 5. Crea un Pull Request
```

### ğŸ“‹ GuÃ­as de Estilo

- **SQL**: Usar MAYÃšSCULAS para palabras clave, nombres descriptivos
- **PL/SQL**: Comentarios en espaÃ±ol, indentaciÃ³n de 4 espacios
- **Bash**: ShellCheck compliant, comentarios detallados
- **Commits**: Seguir [Conventional Commits](https://www.conventionalcommits.org/)

---

## ğŸ“š DocumentaciÃ³n Completa

<table>
<tr>
<td align="center" width="33%">
<h3>ğŸ“– GuÃ­as de Usuario</h3>
<a href="Primary/Documentation/BITACORA.md">ğŸ“ Sistema de AuditorÃ­a</a><br/>
<a href="Primary/Documentation/Jobs_Manual.md">ğŸ¤– Manual de Jobs</a><br/>
<a href="standby/Documentation/DBEAVER-CONFIG.md">ğŸ”§ Configurar DBeaver</a>
</td>
<td align="center" width="33%">
<h3>ğŸ”§ GuÃ­as TÃ©cnicas</h3>
<a href="standby/Documentation/oracle-docker-guide.md">ğŸ³ Oracle en Docker</a><br/>
<a href="standby/Documentation/SWITCHOVER-GUIDE.md">ğŸ”„ GuÃ­a Switchover</a><br/>
<a href="standby/Documentation/SWITCHOVER-QUICK.md">âš¡ Switchover RÃ¡pido</a>
</td>
<td align="center" width="33%">
<h3>ğŸ“Š Documentos</h3>
<a href="Vitalis.txp">ğŸ—‚ï¸ Modelo ER</a><br/>
<a href="vitalis_script.SQL">ğŸ“œ Script Completo</a><br/>
<a href="LICENSE">ğŸ“„ Licencia</a>
</td>
</tr>
</table>

---

## ğŸŒŸ Agradecimientos

<div align="center">

Agradecemos especialmente a:

**ğŸ“ Universidad Nacional de Costa Rica - Sede RegiÃ³n Brunca**  
Por proporcionar el espacio y recursos para desarrollar este proyecto

**ğŸ‘¨â€ğŸ« MÃ¡ster Carlos Carranza Blanco**  
Por su guÃ­a, conocimiento y apoyo durante el desarrollo del proyecto

**ğŸ¤ Comunidad Oracle**  
Por la documentaciÃ³n y recursos que facilitaron la implementaciÃ³n

**ğŸ’» Equipo de Desarrollo**  
Por la dedicaciÃ³n, esfuerzo y compromiso durante todo el proyecto

</div>

---

## ğŸ“Š EstadÃ­sticas del Proyecto

<div align="center">

![LÃ­neas de CÃ³digo](https://img.shields.io/badge/L%C3%ADneas%20de%20C%C3%B3digo-15K+-blue?style=for-the-badge)
![Scripts SQL](https://img.shields.io/badge/Scripts%20SQL-50+-green?style=for-the-badge)
![Procedimientos](https://img.shields.io/badge/Procedimientos-30+-orange?style=for-the-badge)
![Triggers](https://img.shields.io/badge/Triggers-40+-red?style=for-the-badge)
![Jobs](https://img.shields.io/badge/Jobs-4-purple?style=for-the-badge)

</div>

---

<div align="center">

### ğŸ’š Desarrollado con pasiÃ³n por el equipo Vitalis DB

**Universidad Nacional â€¢ Sede RegiÃ³n Brunca â€¢ 2025**

[![GitHub](https://img.shields.io/badge/GitHub-Vitalis__DB-181717?style=for-the-badge&logo=github)](https://github.com/kjarj54/vitalis_db)
[![Oracle](https://img.shields.io/badge/Powered%20by-Oracle%2019c-F80000?style=for-the-badge&logo=oracle&logoColor=white)](https://www.oracle.com/)
[![Docker](https://img.shields.io/badge/Containerized%20with-Docker-2496ED?style=for-the-badge&logo=docker&logoColor=white)](https://www.docker.com/)

---

**â­ Si este proyecto te resulta Ãºtil, considera darle una estrella en GitHub**

</div>